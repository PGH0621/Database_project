<!DOCTYPE html>
<html lang="ko">
<head>
<meta charset="UTF-8">
<title>NewFlix</title>

<style>
body{
  margin:0;
  background:#000;
  color:#fff;
  font-family:Arial, sans-serif;
}

/* HEADER */
header{
  position:fixed;
  top:0;
  width:100%;
  z-index:100;
  padding:18px 40px;
  font-size:32px;
  font-weight:bold;
  color:#E50914;
  display:flex;
  justify-content:space-between;
  align-items:center;
  background:linear-gradient(to bottom, rgba(0,0,0,.85), rgba(0,0,0,0));
}

.filter-btn{
  padding:8px 16px;
  border-radius:20px;
  background:#111;
  color:#fff;
  border:1px solid #333;
  cursor:pointer;
}

/* HERO VIDEO */
.hero{
  position:relative;
  height:85vh;
  overflow:hidden;
}
.hero video{
  width:100%;
  height:100%;
  object-fit:cover;
}
.hero::after{
  content:"";
  position:absolute;
  inset:0;
  background:linear-gradient(
    to top,
    rgba(0,0,0,.9) 5%,
    rgba(0,0,0,.4) 40%,
    rgba(0,0,0,.1) 70%
  );
}
.hero-content{
  position:absolute;
  left:40px;
  bottom:20%;
  z-index:2;
  max-width:500px;
}
.hero-title{font-size:48px;font-weight:bold}
.hero-desc{font-size:16px;opacity:.85;margin:15px 0}
.hero-buttons button{
  padding:10px 22px;
  border:none;
  border-radius:6px;
  margin-right:10px;
  cursor:pointer;
}
.btn-play{background:#fff;color:#000}
.btn-info{background:rgba(109,109,110,.7);color:#fff}

/* MUTE BUTTON */
.mute-btn{
  position:absolute;
  right:40px;
  bottom:40px;
  z-index:3;
  width:48px;
  height:48px;
  border-radius:50%;
  border:none;
  background:rgba(0,0,0,.6);
  color:#fff;
  font-size:20px;
  cursor:pointer;
}

/* FILTER PANEL */
.filter-panel{
  display:none;
  background:#111;
  margin:90px 40px 10px;
  padding:16px;
  border-radius:8px;
}
.filter-panel.active{display:block}

/* CONTENT */
h2{
  margin-left:40px;
  margin-top:40px;
  font-size:24px;
}

.row{
  display:flex;
  overflow-x:auto;      /* ìˆ˜ë™ ìŠ¤í¬ë¡¤ */
  padding:20px 40px;
  gap:18px;
}
.row::-webkit-scrollbar{display:none}

.movie-card{
  min-width:230px;
  height:330px;
  background:#111;
  border-radius:8px;
  position:relative;
  transition:.25s;
  overflow:hidden;
}
.movie-card:hover{transform:scale(1.12);z-index:2}

.poster{width:100%;height:100%;object-fit:cover}

.rank{
  position:absolute;
  top:10px;
  left:10px;
  font-size:26px;
  font-weight:bold;
  color:#E50914;
}

.badge-new{
  position:absolute;
  top:10px;
  right:10px;
  background:#E50914;
  padding:4px 8px;
  border-radius:6px;
  font-size:12px;
  font-weight:bold;
}

.info-box{
  position:absolute;
  bottom:0;
  width:100%;
  padding:12px;
  background:linear-gradient(transparent,rgba(0,0,0,.95));
}

.movie-title{font-size:15px;font-weight:bold}
.movie-info{font-size:11px;opacity:.85}
.movie-code{
  font-size:10px;
  opacity:.6;
  margin-top:2px;
}
</style>
</head>

<body>

<header>
  <div>NewFlix</div>
  <button class="filter-btn" onclick="toggleFilter()">í•„í„°</button>
</header>

{% if not only_new %}
<section class="hero">
  <video id="heroVideo" autoplay muted loop playsinline>
    <source src="/static/videos/banner.mp4" type="video/mp4">
  </video>

  <div class="hero-content">
    <div class="hero-title">NOW STREAMING</div>
    <div class="hero-desc">
      ì´ë²ˆ ë‹¬ ê°€ì¥ ì£¼ëª©ë°›ëŠ” ì‘í’ˆ<br>
      ê·¹ì¥ì—ì„œ ë°”ë¡œ í™”ì œì˜ ì¤‘ì‹¬
    </div>
    <div class="hero-buttons">
      <button class="btn-play">â–¶ ì¬ìƒ</button>
      <button class="btn-info">â„¹ ìƒì„¸ ì •ë³´</button>
    </div>
  </div>

  <button class="mute-btn" id="muteBtn" onclick="toggleMute()">ğŸ”‡</button>
</section>
{% endif %}

<div id="filterPanel" class="filter-panel">
  <form method="GET">
    <label>
      <input type="checkbox" name="only_new" value="1" {% if only_new %}checked{% endif %}>
      ì‹ ê·œ ì½˜í…ì¸ ë§Œ ë³´ê¸°
    </label>
    <button type="submit" class="filter-btn" style="margin-left:10px">ì ìš©</button>
  </form>
</div>

{% if not only_new %}
<h2>{{ selected_year }}ë…„ {{ selected_month }}ì›” ë°•ìŠ¤ì˜¤í”¼ìŠ¤ ğŸ”¥</h2>
<div class="row">
  {% for m in movies %}
  <a href="/movie/{{ m.movieCd }}" style="text-decoration:none;color:inherit">
    <div class="movie-card">
      <img class="poster" src="/static/posters/{{ m.poster }}">
      <div class="rank">{{ m.rank }}</div>
      {% if m.is_new %}<div class="badge-new">NEW</div>{% endif %}
      <div class="info-box">
        <div class="movie-title">{{ m.movieNm }}</div>
        <div class="movie-info">ëˆ„ì  {{ m.audiAcc }}</div>
        <div class="movie-code">Code: {{ m.movieCd }}</div>
      </div>
    </div>
  </a>
  {% endfor %}
</div>
{% endif %}

<h2>{% if only_new %}ì‹ ê·œ ì½˜í…ì¸  ğŸ†•{% else %}ì‹ ê·œ ì½˜í…ì¸  ğŸ†• (ìµœê·¼ 1ê°œì›”){% endif %}</h2>
<div class="row">
  {% for n in new_contents %}
  <a href="/movie/{{ n.movieCd }}" style="text-decoration:none;color:inherit">
    <div class="movie-card">
      <img class="poster" src="/static/posters/{{ n.poster }}">
      <div class="badge-new">NEW</div>
      <div class="info-box">
        <div class="movie-title">{{ n.movieNm }}</div>
        <div class="movie-info">ì²« ë“±ì¥ {{ n.targetDt }}</div>
        <div class="movie-code">Code: {{ n.movieCd }}</div>
      </div>
    </div>
  </a>
  {% endfor %}
</div>

<script>
function toggleFilter(){
  document.getElementById("filterPanel").classList.toggle("active");
}

const video = document.getElementById("heroVideo");
const muteBtn = document.getElementById("muteBtn");

function toggleMute(){
  if(!video) return;
  video.muted = !video.muted;
  muteBtn.textContent = video.muted ? "ğŸ”‡" : "ğŸ”Š";
}
</script>

</body>
</html>
